(()=>{let e=document.getElementById("backspace"),t=document.getElementById("valuespace"),n=document.getElementById("valueplaceholder"),s=document.getElementsByClassName("block"),l=document.getElementById("loading"),a=document.getElementById("wrap-access"),i=document.getElementById("finish"),d=!1;e.addEventListener("click",(e=>{let s=t.innerHTML;t.innerHTML=t.textContent.substring(0,t.textContent.length-1),s.length>1?n.style.display="none":n.style.display="initial"}));for(let e=0;e<s.length;e++)s.item(e).addEventListener("click",(e=>{let s=e.target.textContent,o=t.innerHTML,c=document.getElementById("authKey").value;if("취소"===s)t.innerHTML="";else if("전송"===s)if(4!==o.length)alert("4자리를 입력해주세요");else{l.classList.remove("off");let e={authKey:c,accessCode:o};fetch("/jongsungogo",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.success?(d=!0,a.classList.add("off"),l.classList.add("off"),i.classList.remove("off")):(alert("세션이 연결되지 않았습니다."),l.classList.add("off"))}))}else o.length>=4?alert("4자리를 초과할 수 없습니다."):t.innerHTML=o+s;o.length>=0?n.style.display="none":n.style.display="initial"}));setInterval((()=>{null==i.classList.item(1)&&(d||(a.classList.remove("off"),l.classList.add("off"),i.classList.add("off")))}),1e3)})();