(()=>{let e=document.getElementById("backspace"),t=document.getElementById("valuespace"),s=document.getElementById("valueplaceholder"),n=document.getElementsByClassName("block"),l=document.getElementById("loading"),a=document.getElementById("wrap-access"),c=document.getElementById("finish"),o=!1;e.addEventListener("click",(e=>{let n=t.innerHTML;t.innerHTML=t.textContent.substring(0,t.textContent.length-1),n.length>1?s.style.opacity=0:s.style.opacity=1}));for(let e=0;e<n.length;e++)n.item(e).addEventListener("click",(e=>{let n=e.target.textContent,i=t.innerHTML,d=document.getElementById("authKey").value;if("취소"===n)return t.innerHTML="",void(s.style.opacity=1);if("전송"===n)if(4!==i.length)alert("4자리를 입력해주세요");else{l.classList.remove("off");let e={authKey:d,accessCode:i};fetch("/authsubmit",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.success?(o=!0,a.classList.add("off"),l.classList.add("off"),c.classList.remove("off")):(alert("세션이 연결되지 않았습니다."),l.classList.add("off"))}))}else i.length>=4?alert("4자리를 초과할 수 없습니다."):t.innerHTML=i+n;i.length>=0?s.style.opacity=0:s.style.opacity=1}));setInterval((()=>{null==c.classList.item(1)&&(o||(a.classList.remove("off"),l.classList.add("off"),c.classList.add("off")))}),1e3)})();